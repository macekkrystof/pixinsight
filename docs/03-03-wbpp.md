---
title: "PixInsight pro ÃºplnÃ© zaÄÃ¡teÄnÃ­ky #3 â€“ stackovÃ¡nÃ­ WBPP"
date: "2024-06-24T15:16:45+00:00"
lastmod: "2024-06-25T09:20:07+00:00"
source: "https://clear-skies.azurewebsites.net/2024/06/24/pixinsight-pro-uplne-zacatecniky-3-stackovani-wbpp/"
---

SnÃ­mky mÃ¡me protÅ™Ã­dÄ›nÃ©, ve ÄtyÅ™ech sloÅ¾kÃ¡ch: Light, Dark, Flat, Bias. Pokud nefotÃ­te Bias snÃ­mky, ale DarkFlaty, sloÅ¾ku si pojmenujte tÅ™eba DarkFlat. Nastal Äas otevÅ™Ã­t PixInsight, v nÄ›m zÃ¡loÅ¾ku Scripts => Batch Processing => WeightedBatchPreProcessing, coÅ¾ je kryptickÃ½ nÃ¡zev pro skript, kterÃ½ umÃ­ mimo jinÃ© i stackovat snÃ­mky :-).

![](./03-03-wbpp/03-03-wbpp_img01_image-15.png)
MÃ¡te-li data hezky rozÅ™azena ve sloÅ¾kÃ¡ch dle druhu snÃ­mku, mÅ¯Å¾ete vyzkouÅ¡et rovnou kliknout v levÃ©m dolnÃ­m rohu okna tlaÄÃ­tko + Directory a vybrat sloÅ¾ku s daty. **Je dÅ¯leÅ¾itÃ©, aby ve sloÅ¾ce byla opravdu jen data rozÅ™azenÃ¡ do sloÅ¾ek, Å¾Ã¡dnÃ© dalÅ¡Ã­ soubory!** PoznÃ¡-li skript sprÃ¡vnÄ› vÅ¡echny snÃ­mky, vÃ½sledek by mÄ›l na zÃ¡loÅ¾ce calibration vypadat nÄ›jak takto:

![](./03-03-wbpp/03-03-wbpp_img02_image-17.png)
Pokud se nezdaÅ™ilo a snÃ­mky nejsou sprÃ¡vnÄ› rozpoznanÃ©, vyresetujte soubory tlaÄÃ­tkem reset na spodku okna a vyuÅ¾ijte pro pÅ™idÃ¡nÃ­ snÃ­mkÅ¯ jednotlivÃ¡ tlaÄÃ­tka +Bias, +Darks, +Flats, +Lights. Pokud nemÃ¡te Bias snÃ­mky, ale dark flaty, pÅ™idejte je jako darky, skript si je pÅ™iÅ™adÃ­ sprÃ¡vnÄ› dÃ­ky shodnÄ› dlouhÃ© expozici s flaty.

V zÃ¡loÅ¾kÃ¡ch Bias, Darks a Flats pravdÄ›podobnÄ› nic mÄ›nit nemusÃ­me, pÅ™ejdeme rovnou na zÃ¡loÅ¾ku Lights.

## Lights

![](./03-03-wbpp/03-03-wbpp_img03_image-18.png)
Zkontrolujte, Å¾e mÃ¡te na pravÃ© stranÄ› okna zakliknutÃ© vÅ¡echny procesy stejnÄ› jako jÃ¡, od Subframe Weighting aÅ¾ po Image Integration. 

**Astrometric solution**

V sekci Astrometric Solution klikneme na Image Solver parametersâ€¦ a zkontrolujeme zda jsou pole sprÃ¡vnÄ› vyplnÄ›nÃ¡. PixInsight pÅ™i prÅ¯bÄ›hu stackovÃ¡nÃ­ analyzuje snÃ­mky a provÃ¡dÃ­ â€plate solvingâ€œ, potÅ™ebujeme mÃ­t sprÃ¡vnÄ› vyplnÄ›nÃ© souÅ™adnice objektu, ohniskovou vzdÃ¡lenost dalekohledu, velikost pixelÅ¯ snÃ­maÄe a datum (Äas nemusÃ­ bÃ½t pÅ™esnÃ½). Pokud pouÅ¾Ã­vÃ¡te jakÃ½koliv specializovanÃ½ software pro focenÃ­ DSO (ASIAir, KStars, N.I.N.Aâ€¦), budou tyhle informace obsaÅ¾eny v TIF hlaviÄkÃ¡ch Light snÃ­mkÅ¯, pÅ™esto je ale zkontrolujte a pÅ™Ã­padnÄ› opravte, Äasto se stÃ¡vÃ¡, Å¾e si PixInsight pamatuje data z poslednÃ­ho stackovÃ¡nÃ­, kterÃ¡ ale tÄ›m souÄasnÃ½m neodpovÃ­dajÃ­. Pokud se plate solve bÄ›hem stackovÃ¡nÃ­ nezdaÅ™Ã­, PixInsight vÃ¡s v prÅ¯bÄ›hu vyzve k zadÃ¡nÃ­ tÄ›chto informacÃ­ znovu. 

SouÅ™adnice objektu mÅ¯Å¾ete vyhledat pomocÃ­ tlaÄÃ­tka Search, do okna, co se otevÅ™e, zadÃ¡te nÃ¡zev (kÃ³d objektu) a PixInsight si souÅ™adnice najde v online katalogu. 

![](./03-03-wbpp/03-03-wbpp_img04_image-21.png)
Takto bude vypadat finÃ¡lnÃ­ zadÃ¡nÃ­ pro naÅ¡e data mlhoviny M42.

![](./03-03-wbpp/03-03-wbpp_img05_image-23.png)
**Image Integration**

V Image Integration chceme jen zakliknout Large-scale pixel rejection, sami vÃ½vojÃ¡Å™i to doporuÄujÃ­ od doby, co po obloze lÃ©tajÃ­ hromady StarlinkÅ¯ apod. VÃ½sledek bude lepÅ¡Ã­ odstranÄ›nÃ­ stop satelitÅ¯ a letadel ve sloÅ¾enÃ©m snÃ­mku.

![](./03-03-wbpp/03-03-wbpp_img06_image-24.png)
## Calibration

NynÃ­ pÅ™ejdeme na zÃ¡loÅ¾ku Calibration.

![](./03-03-wbpp/03-03-wbpp_img07_image-25.png)
Zde v ideÃ¡lnÃ­m pÅ™Ã­padÄ› nebude nutnÃ© nic mÄ›nit. MÃ¡me zde shrnutÃ© vÅ¡echny typy snÃ­mkÅ¯, co jsme naÄetli do skriput. Zkontrolujte, Å¾e vÅ¡e sedÃ­. u Light snÃ­mkÅ¯ na panelu vpravo zkontrolujte, zda je zaÅ¡krnuto CFA images pokud jsou vaÅ¡e snÃ­mky barevnÃ©. Pokud nejsou, naopak CFA nesmÃ­ bÃ½t zaÅ¡krnuto.   
Jestli jste vloÅ¾ili barevnÃ© Light snÃ­mky a musÃ­te CFA images zaÅ¡krtnout ruÄnÄ›, vyberte radÄ›ji ruÄnÄ› i Mosaic pattern, dle druhu Bayerovy masky vaÅ¡Ã­ kamery. 

![](./03-03-wbpp/03-03-wbpp_img08_image.png)
Pokud PixInsight nerozpoznal barevnÃ½ obrÃ¡zek, pravdÄ›podobnÄ› by sprÃ¡vnÄ› neurÄil ani Bayerovu masku. S tÃ­mto problÃ©mem jsem se uÅ¾ setkal u dat focenÃ½ch pÅ™es kamery Moravian Instruments.   
  
**Output directory**  
Rovnou mÅ¯Å¾eme vybrat â€Output directoryâ€œ tedy sloÅ¾ku, do kterÃ© bude WBPP skript uklÃ¡dat prÅ¯bÄ›Å¾nÃ¡ data a vÃ½slednÃ½ sloÅ¾enÃ½ snÃ­mek. Vyberte sloÅ¾ku dle vaÅ¡ich preferencÃ­, ale rozdÃ­lnou od sloÅ¾ky, kde mÃ¡te uloÅ¾ena data co zpracovÃ¡vÃ¡me. 

![](./03-03-wbpp/03-03-wbpp_img09_image-1.png)
## Post-Calibration

PoslednÃ­ zÃ¡loÅ¾ka, kterou navÅ¡tÃ­vÃ­me obsahuje tabulku s vÃ½slednÃ½mi snÃ­mky. V naÅ¡em pÅ™Ã­padÄ› zde bude jeden, nicmÃ©nÄ› existujÃ­ situace, kdy jich bude vÃ­ce â€“ napÅ™Ã­klad budeme chtÃ­t zvlÃ¡Å¡Å¥ sklÃ¡dat jednotlivÃ© barevy u mono kamery apod. K tomu by jiÅ¾ byly zapotÅ™ebÃ­ Grouping keywords, o kterÃ½ch tÅ™eba napÃ­Å¡u nÄ›co v budoucnu, teÄ to nenÃ­ dÅ¯leÅ¾itÃ©.

![](./03-03-wbpp/03-03-wbpp_img10_post-calibr.png)
Zaklikneme jedinÃ½ Å™Ã¡dek v tabulce a nynÃ­ se podÃ­vÃ¡me na moÅ¾nosti pravÃ©ho panelu zde. 

**Drizzle**

Pro spoustu z nÃ¡s bude â€drizzlingâ€œ opravdu klÃ­ÄovÃ½, abychom ze snÃ­mkÅ¯ vytÄ›Å¾ili maximum detailÅ¯.   
Princip fungovÃ¡nÃ­ spoÄÃ­vÃ¡ ve vyuÅ¾itÃ­ vÃ­ce snÃ­mkÅ¯ stejnÃ©ho objektu s mÃ­rnÃ½m posunem, coÅ¾ umoÅ¾Åˆuje interpolaci a rekonstrukci detailÅ¯, kterÃ© by jinak nebyly viditelnÃ© kvÅ¯li omezenÃ©mu rozliÅ¡enÃ­ jednotlivÃ½ch snÃ­mkÅ¯.  
PÅ™i pouÅ¾itÃ­ Drizzle algoritmu se jednotlivÃ© snÃ­mky â€pÅ™emapujÃ­â€œ na vyÅ¡Å¡Ã­ rozliÅ¡enÃ­ a kombinujÃ­ se, coÅ¾ vede k zlepÅ¡enÃ­ ostrosti a snÃ­Å¾enÃ­ Å¡umu.   
Asi je vÃ¡m ale jasnÃ©, Å¾e to mÃ¡ nÄ›jakÃ½ hÃ¡Äek a zdaleka to nebude fungovat vÅ¡ude. PojÄme si tedy odpovÄ›dÄ›t, zda pro vÃ¡s drizzle bude pÅ™Ã­nosnÃ½:

- **PouÅ¾Ã­vÃ¡te dithering?** Dithering je technika nÃ¡hodnÃ©ho posouvÃ¡nÃ­ snÃ­mkÅ¯ mezi jednotlivÃ½mi expozicemi, kterÃ¡ pomÃ¡hÃ¡ snÃ­Å¾it Å¡um a odstranÄ›nÃ­ artefaktÅ¯ v astrofotografii. Pokud jste pÅ™i focenÃ­ pouÅ¾ili autoguiding a mÄ›li jste zapnutÃ½ dithering, mÃ¡te tento bod splnÄ›nÃ½. V opaÄnÃ©m pÅ™Ã­padÄ› nelze drizzle vyuÅ¾Ã­t. Alternativou ditheringu by mohlo bÃ½t, pokud by vÃ¡m montÃ¡Å¾ v prÅ¯bÄ›hu celÃ©ho focenÃ­ â€ujÃ­Å¾dÄ›laâ€œ a snÃ­mky byly k sobÄ› navzÃ¡jem viditelnÄ› posouvanÃ© ğŸ™‚
- **MÃ¡te aspoÅˆ 20 Light snÃ­mkÅ¯?** S menÅ¡Ã­m poÄtem vÃ½vojÃ¡Å™i PixInsightu nedoporuÄujÃ­ drizzle pouÅ¾Ã­vat.
- **Jsou vaÅ¡e snÃ­mky â€under-sampledâ€œ?** Under-sampling v astrofotografii nastÃ¡vÃ¡, kdyÅ¾ velikost pixelÅ¯ kamery je v pomÄ›ru k ohniskovÃ© vzdÃ¡lenosti dalekohledu a seeingu pÅ™Ã­liÅ¡ velkÃ¡ na to, aby zachytila jemnÃ© detaily objektu, coÅ¾ vede k jejich ztrÃ¡tÄ› a zhorÅ¡enÃ­ kvality obrazu. SpoÄÃ­tat si to mÅ¯Å¾ete [zde](https://astronomy.tools/calculators/ccd_suitability "zde"). VÃ½vojÃ¡Å™i PixInsightu sice Å™Ã­kajÃ­, Å¾e byste i v pÅ™Ã­padÄ› odpovÃ­dajÃ­cÃ­ velikosti pixelu mÄ›li pouÅ¾Ã­t drizzle se Scale 1 (pouze s barevnou kamerou a velkÃ½m poÄtem Light snÃ­mkÅ¯), jÃ¡ jsem pÅ™i svÃ½ch pokusech nezaznamenal Å¾Ã¡dnÃ½ benefit.
- ***MÃ¡te cca dvojnÃ¡sobek Äasu na proces stackovÃ¡nÃ­?*** Drizzle zpÅ¯sobÃ­ Å¾e celÃ½ bÄ›h WBPP skriptu je z mÃ© zkuÅ¡enosti skoro 2x tak dlouhÃ½. Pokud vÃ­te, Å¾e data nejsou pÅ™Ã­liÅ¡ dobrÃ¡, chcete si to jen sloÅ¾it a podÃ­vat se, nedoporuÄuji ho zapÃ­nat.

ZÃ¡kladnÃ­ nastavenÃ­ Drizzle mÅ¯Å¾ete vyzkouÅ¡et takto:

![](./03-03-wbpp/03-03-wbpp_img11_image-2.png)
Scale 2 znamenÃ¡, Å¾e vÃ½slednÃ½ snÃ­mek bude mÃ­t 2x menÅ¡Ã­ pixely, vyÅ¡Å¡Ã­ Scale jsem zatÃ­m nikdy nepouÅ¾il. 

## SpuÅ¡tÄ›nÃ­

A mÃ¡me hotovo! VÅ¡e mÃ¡me nastavenÃ©, nezbÃ½vÃ¡ neÅ¾ v pravÃ©m dolnÃ­m rohu kliknout na Run a v klidu poÄkat na konec procesu ğŸ™‚ Doba zpracovÃ¡nÃ­ se bude extrÃ©mnÄ› liÅ¡it dle mnoÅ¾stvÃ­ a velikosti vaÅ¡ich dat a rychlosti vaÅ¡eho poÄÃ­taÄe. MÅ¯Å¾e to bÃ½t nÄ›co mezi 15 minutami a mnoho mnoho hodinami. VzorovÃ¡ data ode mÄ› by na modernÄ›jÅ¡Ã­m PC nemÄ›ly zabrat vÃ­ce neÅ¾ hodinu. ProblÃ©my v prÅ¯bÄ›hu stackovÃ¡nÃ­ nebÃ½vajÃ­ ÄastÃ©. MÅ¯Å¾e se stÃ¡t, Å¾e nezafunguje automatickÃ½ plate solve (rozpoznÃ¡nÃ­ hvÄ›zd na snÃ­mku) a budete muset ruÄnÄ› opÄ›t vybÃ­rat souÅ™adnice objektu, datum, Äas, ohnisko a velikost pixelÅ¯, tak jako jsme to dÄ›lali vÃ½Å¡e v tomto ÄlÃ¡nku v sekci Astrometric solution. 

## ZÃ¡vÄ›r a vÃ½sledky

Po ukonÄenÃ­ procesu se podÃ­vÃ¡me do sloÅ¾ky, kterou jsme ve WBPP zvolili. Struktura by mÄ›la vypadat nÃ¡sledovnÄ›:  

![](./03-03-wbpp/03-03-wbpp_img12_image-3.png)
PrimÃ¡rnÄ› nÃ¡s budou zajÃ­mat data ze sloÅ¾ky master:

![](./03-03-wbpp/03-03-wbpp_img13_image-4.png)
KonkrÃ©tnÄ› soubor *masterLight\_BIN-1\_3008x3008\_EXPOSURE-180.00s\_FILTER-NoFilter\_RGB\_autocrop.xisf* pÅ™edstavuje sloÅ¾enÃ½ snÃ­mek, kterÃ½ byl zÃ¡roveÅˆ oÅ™ezÃ¡n do takovÃ© oblasti, kterou majÃ­ vÅ¡echny snÃ­mky spoleÄnou (napÅ™. kvÅ¯li ditheringu a ujÃ­Å¾dÄ›nÃ­ montÃ¡Å¾e se pozice objektÅ¯ napÅ™Ã­c jednotlivÃ½mi snÃ­mky mÃ­rnÄ› liÅ¡Ã­).   
DÃ¡le pak soubor *masterLight\_BIN-1\_3008x3008\_EXPOSURE-180.00s\_FILTER-NoFilter\_RGB\_drizzle\_2x\_autocrop.xisf* je rovnÄ›Å¾ sloÅ¾enÃ½ a oÅ™ezanÃ½, ale jednÃ¡ se o soubor, na kterÃ½ byl pouÅ¾it drizzling (bude i o dost vÄ›tÅ¡Ã­). MÅ¯Å¾ete si je vzÃ¡jemnÄ› porovnat, zda uvidÃ­te rozdÃ­l ğŸ™‚

Struktura pojmenovÃ¡nÃ­ je vÅ¾dy stejnÃ¡, budou se liÅ¡it jen ÄÃ¡si o biningu, rozliÅ¡enÃ­ a expozici, tedy i u vaÅ¡ich dat takÃ© snadno najdete sprÃ¡vnÃ½ vÃ½slednÃ½ sloÅ¾enÃ½ snÃ­mek. MÅ¯Å¾ete si ho zkusit otevÅ™Ã­t a v pÅ™Ã­Å¡tÃ­m dÃ­le se vrhneme na zpracovÃ¡nÃ­!
